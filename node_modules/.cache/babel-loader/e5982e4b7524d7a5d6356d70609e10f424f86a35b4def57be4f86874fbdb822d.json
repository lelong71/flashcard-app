{"ast":null,"code":"import React,{useCallback,useState}from'react';import{motion,AnimatePresence}from'framer-motion';import{Upload,FileText,AlertCircle}from'lucide-react';import{useFlashcard}from'../contexts/FlashcardContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function UploadSection(){const{state,dispatch}=useFlashcard();const[isDragOver,setIsDragOver]=useState(false);const handleFileUpload=useCallback(async file=>{if(!file.name.endsWith('.json')){dispatch({type:'SET_ERROR',payload:'Please select a JSON file'});return;}dispatch({type:'SET_LOADING',payload:true});dispatch({type:'SET_ERROR',payload:null});try{const text=await file.text();const data=JSON.parse(text);if(!data.flashcards||!Array.isArray(data.flashcards)){throw new Error('Invalid JSON format: missing flashcards array');}if(data.flashcards.length===0){throw new Error('No flashcards found in the JSON file');}dispatch({type:'SET_FLASHCARDS',payload:data.flashcards});dispatch({type:'SET_METADATA',payload:data.metadata||{}});}catch(error){dispatch({type:'SET_ERROR',payload:\"Failed to load JSON file: \".concat(error instanceof Error?error.message:'Unknown error')});}},[dispatch]);const handleDrop=useCallback(e=>{e.preventDefault();setIsDragOver(false);const files=e.dataTransfer.files;if(files.length>0){handleFileUpload(files[0]);}},[handleFileUpload]);const handleDragOver=useCallback(e=>{e.preventDefault();setIsDragOver(true);},[]);const handleDragLeave=useCallback(e=>{e.preventDefault();setIsDragOver(false);},[]);const handleFileInput=useCallback(e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){handleFileUpload(file);}},[handleFileUpload]);if(state.flashcards.length>0){return null;}return/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.5},className:\"card mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(motion.div,{className:\"mb-6\",initial:{scale:0},animate:{scale:1},transition:{delay:0.2,type:\"spring\",stiffness:200},children:/*#__PURE__*/_jsx(Upload,{className:\"mx-auto h-16 w-16 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-800 mb-4\",children:\"Load Flashcard JSON\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Select a JSON file created by the PDF converter tool\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-lg p-8 mb-4 transition-colors \".concat(isDragOver?'border-blue-500 bg-blue-50':'border-gray-300 hover:border-gray-400'),onDrop:handleDrop,onDragOver:handleDragOver,onDragLeave:handleDragLeave,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"jsonFile\",className:\"cursor-pointer\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"btn btn-primary inline-flex items-center\",whileHover:{scale:1.05},whileTap:{scale:0.95},children:[/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 mr-2\"}),\"Choose JSON File\"]})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"jsonFile\",accept:\".json\",className:\"hidden\",onChange:handleFileInput}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"or drag and drop JSON file here\"})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:state.error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:'auto'},exit:{opacity:0,height:0},className:\"bg-red-50 border border-red-200 rounded-lg p-4 mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-red-600 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-red-800\",children:\"Error Loading File\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 mt-1\",children:state.error})]})]})})})]})})});}","map":{"version":3,"names":["React","useCallback","useState","motion","AnimatePresence","Upload","FileText","AlertCircle","useFlashcard","jsx","_jsx","jsxs","_jsxs","UploadSection","state","dispatch","isDragOver","setIsDragOver","handleFileUpload","file","name","endsWith","type","payload","text","data","JSON","parse","flashcards","Array","isArray","Error","length","metadata","error","concat","message","handleDrop","e","preventDefault","files","dataTransfer","handleDragOver","handleDragLeave","handleFileInput","_e$target$files","target","children","div","initial","opacity","y","animate","exit","transition","duration","className","scale","delay","stiffness","onDrop","onDragOver","onDragLeave","htmlFor","whileHover","whileTap","id","accept","onChange","height"],"sources":["/Users/longl488/dev/tmp/flashcard/src/components/UploadSection.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Upload, FileText, AlertCircle } from 'lucide-react';\nimport { useFlashcard } from '../contexts/FlashcardContext';\n\nexport function UploadSection() {\n  const { state, dispatch } = useFlashcard();\n  const [isDragOver, setIsDragOver] = useState(false);\n\n  const handleFileUpload = useCallback(async (file: File) => {\n    if (!file.name.endsWith('.json')) {\n      dispatch({ type: 'SET_ERROR', payload: 'Please select a JSON file' });\n      return;\n    }\n\n    dispatch({ type: 'SET_LOADING', payload: true });\n    dispatch({ type: 'SET_ERROR', payload: null });\n\n    try {\n      const text = await file.text();\n      const data = JSON.parse(text);\n\n      if (!data.flashcards || !Array.isArray(data.flashcards)) {\n        throw new Error('Invalid JSON format: missing flashcards array');\n      }\n\n      if (data.flashcards.length === 0) {\n        throw new Error('No flashcards found in the JSON file');\n      }\n\n      dispatch({ type: 'SET_FLASHCARDS', payload: data.flashcards });\n      dispatch({ type: 'SET_METADATA', payload: data.metadata || {} });\n    } catch (error) {\n      dispatch({ \n        type: 'SET_ERROR', \n        payload: `Failed to load JSON file: ${error instanceof Error ? error.message : 'Unknown error'}` \n      });\n    }\n  }, [dispatch]);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n    \n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      handleFileUpload(files[0]);\n    }\n  }, [handleFileUpload]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n\n  const handleFileInput = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileUpload(file);\n    }\n  }, [handleFileUpload]);\n\n  if (state.flashcards.length > 0) {\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -20 }}\n        transition={{ duration: 0.5 }}\n        className=\"card mb-8\"\n      >\n        <div className=\"text-center\">\n          <motion.div \n            className=\"mb-6\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n          >\n            <Upload className=\"mx-auto h-16 w-16 text-gray-400\" />\n          </motion.div>\n          \n          <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n            Load Flashcard JSON\n          </h2>\n          \n          <p className=\"text-gray-600 mb-6\">\n            Select a JSON file created by the PDF converter tool\n          </p>\n\n          <div\n            className={`border-2 border-dashed rounded-lg p-8 mb-4 transition-colors ${\n              isDragOver \n                ? 'border-blue-500 bg-blue-50' \n                : 'border-gray-300 hover:border-gray-400'\n            }`}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n          >\n            <label htmlFor=\"jsonFile\" className=\"cursor-pointer\">\n              <motion.div \n                className=\"btn btn-primary inline-flex items-center\"\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n              >\n                <FileText className=\"w-5 h-5 mr-2\" />\n                Choose JSON File\n              </motion.div>\n            </label>\n            \n            <input\n              type=\"file\"\n              id=\"jsonFile\"\n              accept=\".json\"\n              className=\"hidden\"\n              onChange={handleFileInput}\n            />\n            \n            <p className=\"text-sm text-gray-500 mt-2\">\n              or drag and drop JSON file here\n            </p>\n          </div>\n\n          {/* Error Display */}\n          <AnimatePresence>\n            {state.error && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: 'auto' }}\n                exit={{ opacity: 0, height: 0 }}\n                className=\"bg-red-50 border border-red-200 rounded-lg p-4 mt-4\"\n              >\n                <div className=\"flex items-center\">\n                  <AlertCircle className=\"h-5 w-5 text-red-600 mr-3\" />\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-red-800\">\n                      Error Loading File\n                    </h3>\n                    <p className=\"text-sm text-red-700 mt-1\">\n                      {state.error}\n                    </p>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}