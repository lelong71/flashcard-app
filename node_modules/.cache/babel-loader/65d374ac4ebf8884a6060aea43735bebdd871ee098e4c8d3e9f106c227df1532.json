{"ast":null,"code":"import _objectSpread from\"/Users/longl488/dev/tmp/flashcard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const initialState={flashcards:[],currentCardIndex:0,isAnswerVisible:false,originalOrder:[],metadata:null,isLoading:false,error:null};function flashcardReducer(state,action){switch(action.type){case'SET_FLASHCARDS':return _objectSpread(_objectSpread({},state),{},{flashcards:action.payload,originalOrder:[...action.payload],currentCardIndex:0,isAnswerVisible:false,error:null});case'SET_METADATA':return _objectSpread(_objectSpread({},state),{},{metadata:action.payload});case'SET_CURRENT_CARD':return _objectSpread(_objectSpread({},state),{},{currentCardIndex:action.payload,isAnswerVisible:false});case'TOGGLE_ANSWER':return _objectSpread(_objectSpread({},state),{},{isAnswerVisible:!state.isAnswerVisible});case'SHUFFLE_CARDS':const shuffled=[...state.flashcards];for(let i=shuffled.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]];}return _objectSpread(_objectSpread({},state),{},{flashcards:shuffled,currentCardIndex:0,isAnswerVisible:false});case'RESET':return _objectSpread(_objectSpread({},state),{},{flashcards:[],currentCardIndex:0,isAnswerVisible:false,originalOrder:[],metadata:null,error:null});case'SET_LOADING':return _objectSpread(_objectSpread({},state),{},{isLoading:action.payload});case'SET_ERROR':return _objectSpread(_objectSpread({},state),{},{error:action.payload,isLoading:false});default:return state;}}const FlashcardContext=/*#__PURE__*/createContext(undefined);export function FlashcardProvider(_ref){let{children}=_ref;const[state,dispatch]=useReducer(flashcardReducer,initialState);return/*#__PURE__*/_jsx(FlashcardContext.Provider,{value:{state,dispatch},children:children});}export function useFlashcard(){const context=useContext(FlashcardContext);if(context===undefined){throw new Error('useFlashcard must be used within a FlashcardProvider');}return context;}","map":{"version":3,"names":["React","createContext","useContext","useReducer","jsx","_jsx","initialState","flashcards","currentCardIndex","isAnswerVisible","originalOrder","metadata","isLoading","error","flashcardReducer","state","action","type","_objectSpread","payload","shuffled","i","length","j","Math","floor","random","FlashcardContext","undefined","FlashcardProvider","_ref","children","dispatch","Provider","value","useFlashcard","context","Error"],"sources":["/Users/longl488/dev/tmp/flashcard/src/contexts/FlashcardContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, ReactNode } from 'react';\n\nexport interface Flashcard {\n  question: string;\n  answer: string;\n  all_options?: Record<string, string>;\n  question_number: number;\n  format: 'multiple_choice' | 'true_false';\n}\n\nexport interface Metadata {\n  source_pdf?: string;\n  total_pages?: number;\n  format_type?: string;\n  questions_extracted?: number;\n  answer_key_entries?: number;\n  valid_flashcards?: number;\n  conversion_timestamp?: string;\n}\n\ninterface FlashcardState {\n  flashcards: Flashcard[];\n  currentCardIndex: number;\n  isAnswerVisible: boolean;\n  originalOrder: Flashcard[];\n  metadata: Metadata | null;\n  isLoading: boolean;\n  error: string | null;\n}\n\ntype FlashcardAction =\n  | { type: 'SET_FLASHCARDS'; payload: Flashcard[] }\n  | { type: 'SET_METADATA'; payload: Metadata }\n  | { type: 'SET_CURRENT_CARD'; payload: number }\n  | { type: 'TOGGLE_ANSWER' }\n  | { type: 'SHUFFLE_CARDS' }\n  | { type: 'RESET' }\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_ERROR'; payload: string | null };\n\nconst initialState: FlashcardState = {\n  flashcards: [],\n  currentCardIndex: 0,\n  isAnswerVisible: false,\n  originalOrder: [],\n  metadata: null,\n  isLoading: false,\n  error: null,\n};\n\nfunction flashcardReducer(state: FlashcardState, action: FlashcardAction): FlashcardState {\n  switch (action.type) {\n    case 'SET_FLASHCARDS':\n      return {\n        ...state,\n        flashcards: action.payload,\n        originalOrder: [...action.payload],\n        currentCardIndex: 0,\n        isAnswerVisible: false,\n        error: null,\n      };\n    \n    case 'SET_METADATA':\n      return {\n        ...state,\n        metadata: action.payload,\n      };\n    \n    case 'SET_CURRENT_CARD':\n      return {\n        ...state,\n        currentCardIndex: action.payload,\n        isAnswerVisible: false,\n      };\n    \n    case 'TOGGLE_ANSWER':\n      return {\n        ...state,\n        isAnswerVisible: !state.isAnswerVisible,\n      };\n    \n    case 'SHUFFLE_CARDS':\n      const shuffled = [...state.flashcards];\n      for (let i = shuffled.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n      }\n      return {\n        ...state,\n        flashcards: shuffled,\n        currentCardIndex: 0,\n        isAnswerVisible: false,\n      };\n    \n    case 'RESET':\n      return {\n        ...state,\n        flashcards: [],\n        currentCardIndex: 0,\n        isAnswerVisible: false,\n        originalOrder: [],\n        metadata: null,\n        error: null,\n      };\n    \n    case 'SET_LOADING':\n      return {\n        ...state,\n        isLoading: action.payload,\n      };\n    \n    case 'SET_ERROR':\n      return {\n        ...state,\n        error: action.payload,\n        isLoading: false,\n      };\n    \n    default:\n      return state;\n  }\n}\n\ninterface FlashcardContextType {\n  state: FlashcardState;\n  dispatch: React.Dispatch<FlashcardAction>;\n}\n\nconst FlashcardContext = createContext<FlashcardContextType | undefined>(undefined);\n\nexport function FlashcardProvider({ children }: { children: ReactNode }) {\n  const [state, dispatch] = useReducer(flashcardReducer, initialState);\n\n  return (\n    <FlashcardContext.Provider value={{ state, dispatch }}>\n      {children}\n    </FlashcardContext.Provider>\n  );\n}\n\nexport function useFlashcard() {\n  const context = useContext(FlashcardContext);\n  if (context === undefined) {\n    throw new Error('useFlashcard must be used within a FlashcardProvider');\n  }\n  return context;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}