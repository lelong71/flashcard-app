#!/bin/bash

# ğŸ”’ Flashcard App - Private Sharing Script
# This script helps you share your app privately with selected users

echo "ğŸ”’ Flashcard App - Private Sharing Options"
echo "========================================="
echo ""

# Build the app first
echo "ğŸ“¦ Building the app..."
npm run build

if [ $? -ne 0 ]; then
    echo "âŒ Build failed! Exiting."
    exit 1
fi

echo "âœ… Build successful!"
echo ""

# Show private options
echo "ğŸ”’ Choose your private sharing method:"
echo ""
echo "1. ğŸ” Password-Protected Netlify (Most Secure)"
echo "2. ğŸ‘¥ Private GitHub Repository (Collaborators Only)"
echo "3. ğŸ“ Encrypted File (Offline + Password)"
echo "4. ğŸ–¥ï¸  Private Server (Full Control)"
echo "5. â˜ï¸  Cloud Storage (Google Drive/Dropbox)"
echo "6. ğŸ“‹ Show all private options"
echo ""

read -p "Enter your choice (1-6): " choice

case $choice in
    1)
        echo ""
        echo "ğŸ” Setting up Password-Protected Netlify..."
        echo ""
        echo "ğŸ“‹ Steps:"
        echo "1. Go to https://netlify.com"
        echo "2. Drag the 'build' folder to upload"
        echo "3. Get your site URL"
        echo "4. Go to Site Settings â†’ Password Protection"
        echo "5. Enable password protection"
        echo "6. Set a secure password"
        echo ""
        echo "ğŸ“ Your build folder is ready: $(pwd)/build"
        echo "ğŸ” Share: URL + password with authorized users"
        echo ""
        echo "âœ… Benefits:"
        echo "â€¢ Professional and secure"
        echo "â€¢ Easy to manage access"
        echo "â€¢ Works on all devices"
        echo "â€¢ Can revoke access anytime"
        ;;
    2)
        echo ""
        echo "ğŸ‘¥ Setting up Private GitHub Repository..."
        echo ""
        echo "ğŸ“‹ Steps:"
        echo "1. Make your GitHub repo private"
        echo "2. Add users as collaborators:"
        echo "   Settings â†’ Collaborators â†’ Add people"
        echo "3. Deploy to GitHub Pages:"
        echo ""
        echo "npm run build && gh-pages -d build"
        echo ""
        echo "4. Share the GitHub Pages URL with collaborators"
        echo ""
        echo "âœ… Benefits:"
        echo "â€¢ Only invited users can access"
        echo "â€¢ Version control included"
        echo "â€¢ GitHub's security features"
        echo "â€¢ Easy collaboration"
        ;;
    3)
        echo ""
        echo "ğŸ“ Creating Encrypted File..."
        echo ""
        read -s -p "Enter a secure password: " password
        echo ""
        echo "Creating encrypted zip file..."
        zip -P "$password" -r flashcard-private.zip build/
        echo ""
        echo "âœ… Created: flashcard-private.zip (password protected)"
        echo ""
        echo "ğŸ“‹ Share with users:"
        echo "1. Send flashcard-private.zip"
        echo "2. Send password separately (email, text, etc.)"
        echo "3. Users extract and open index.html"
        echo ""
        echo "âœ… Benefits:"
        echo "â€¢ Works offline"
        echo "â€¢ No server required"
        echo "â€¢ File-level encryption"
        echo "â€¢ Simple distribution"
        ;;
    4)
        echo ""
        echo "ğŸ–¥ï¸  Setting up Private Server..."
        echo ""
        echo "ğŸ“‹ Options:"
        echo "â€¢ AWS S3 + CloudFront"
        echo "â€¢ DigitalOcean Droplet"
        echo "â€¢ Vercel with authentication"
        echo "â€¢ Custom server with auth"
        echo ""
        echo "ğŸ“ Your build folder: $(pwd)/build"
        echo ""
        echo "ğŸ” Authentication options:"
        echo "â€¢ Basic Auth (.htaccess)"
        echo "â€¢ Custom login system"
        echo "â€¢ IP restrictions"
        echo "â€¢ Two-factor authentication"
        echo ""
        echo "âœ… Benefits:"
        echo "â€¢ Full control over access"
        echo "â€¢ Custom authentication"
        echo "â€¢ Professional hosting"
        echo "â€¢ Advanced security features"
        ;;
    5)
        echo ""
        echo "â˜ï¸  Setting up Cloud Storage..."
        echo ""
        echo "ğŸ“‹ Steps:"
        echo "1. Create encrypted zip:"
        echo "   zip -P 'password' -r flashcard-private.zip build/"
        echo "2. Upload to Google Drive/Dropbox"
        echo "3. Create shared folder"
        echo "4. Invite specific users"
        echo "5. Set folder password"
        echo ""
        echo "âœ… Benefits:"
        echo "â€¢ Familiar platforms"
        echo "â€¢ Easy sharing"
        echo "â€¢ Version control"
        echo "â€¢ Access management"
        ;;
    6)
        echo ""
        echo "ğŸ“‹ All Private Sharing Options Summary:"
        echo ""
        echo "ğŸ¥‡ Password-Protected Netlify:"
        echo "   â€¢ Users visit URL + enter password"
        echo "   â€¢ Professional and secure"
        echo "   â€¢ Easy to manage access"
        echo "   â€¢ Free hosting"
        echo ""
        echo "ğŸ¥ˆ Private GitHub Repository:"
        echo "   â€¢ Only collaborators can access"
        echo "   â€¢ GitHub account required"
        echo "   â€¢ Version control included"
        echo "   â€¢ Free hosting"
        echo ""
        echo "ğŸ¥‰ Encrypted File:"
        echo "   â€¢ Password-protected zip file"
        echo "   â€¢ Works offline"
        echo "   â€¢ No server needed"
        echo "   â€¢ Manual distribution"
        echo ""
        echo "ğŸ… Private Server:"
        echo "   â€¢ Full control over access"
        echo "   â€¢ Custom authentication"
        echo "   â€¢ Professional hosting"
        echo "   â€¢ Monthly cost ($5-20)"
        echo ""
        echo "ğŸ… Cloud Storage:"
        echo "   â€¢ Google Drive/Dropbox"
        echo "   â€¢ Familiar platforms"
        echo "   â€¢ Easy sharing"
        echo "   â€¢ Access management"
        echo ""
        echo "ğŸ¯ Recommendation:"
        echo "â€¢ Small groups: Password-protected Netlify"
        echo "â€¢ Technical users: Private GitHub"
        echo "â€¢ Maximum security: Private server"
        echo "â€¢ Simple sharing: Encrypted file"
        ;;
    *)
        echo "âŒ Invalid choice. Please run the script again."
        ;;
esac

echo ""
echo "ğŸ”’ Security Tips:"
echo "â€¢ Use strong passwords"
echo "â€¢ Share passwords separately from files"
echo "â€¢ Regularly update access permissions"
echo "â€¢ Monitor access logs if possible"
echo ""
echo "ğŸ‰ Your private flashcard app is ready!"
